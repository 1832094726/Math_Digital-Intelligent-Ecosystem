# K-12数学教育系统 - 数据库关系可视化演示

## 🎯 功能特性

### 📊 数据库可视化
- **交互式网络图**: 使用vis-network展示表关系
- **模块化分类**: 按功能模块对表进行颜色分类
- **响应式设计**: 支持桌面和移动设备
- **多种布局**: 层次化、力导向、网格、圆形布局

### 🔍 高级交互功能
- **双击查看详情**: 双击表节点查看详细信息和实时数据
- **悬浮提示**: 鼠标悬浮显示表基本信息
- **点击空白返回**: 点击空白区域关闭模态框
- **搜索功能**: 实时搜索表名和字段
- **缩放控制**: 支持鼠标滚轮和按钮缩放

### 📋 表详情模态框
- **字段结构**: 查看完整的字段定义、类型、约束
- **关系图谱**: 显示表间关系和外键约束
- **实时数据**: 查看表中的实际数据记录
- **数据刷新**: 支持手动刷新最新数据
- **响应式布局**: 大尺寸模态框，更好的数据展示

## 🚀 快速开始

### 1. 启动API服务器

#### Windows用户
```bash
# 双击运行
start-api.bat

# 或命令行运行
python api-server.py
```

#### Linux/Mac用户
```bash
# 安装依赖
pip install flask flask-cors pymysql

# 启动服务器
python api-server.py
```

### 2. 打开可视化界面
```bash
# 在浏览器中打开
index.html
```

## 📡 API接口

API服务器运行在 `http://localhost:5001`

### 可用端点
- `GET /api/health` - 健康检查
- `GET /api/database/tables` - 获取所有表信息
- `GET /api/database/table/<name>` - 获取表数据
- `GET /api/database/table/<name>/count` - 获取表记录数
- `GET /api/database/table/<name>/structure` - 获取表结构

### 查询参数
- `limit`: 限制返回记录数 (默认: 10, 最大: 100)
- `offset`: 偏移量 (默认: 0)

## 🎮 使用说明

### 基本操作
1. **查看概览**: 页面加载后显示完整的数据库关系图
2. **模块筛选**: 使用左侧面板选择要显示的模块
3. **搜索表**: 使用顶部搜索框快速定位表
4. **布局切换**: 使用顶部按钮切换不同的布局模式

### 高级功能
1. **查看表详情**:
   - 双击任意表节点
   - 查看字段结构、关系和实时数据
   - 支持三个标签页切换

2. **实时数据查看**:
   - 点击"实时数据"标签
   - 查看表中的实际记录
   - 支持数据刷新

3. **导出功能**:
   - 支持PNG图片导出
   - 全屏模式查看

## 🗄️ 数据库结构

当前系统包含22个数据表，分为5个功能模块：

### 👥 用户权限系统 (3张表)
- `users` - 用户基础信息
- `user_sessions` - 用户会话管理
- `notifications` - 通知消息

### 🏫 学校组织架构 (6张表)
- `schools` - 学校信息
- `grades` - 年级信息
- `classes` - 班级信息
- `class_students` - 班级学生关联
- `curriculum_standards` - 课程标准
- `subjects` - 学科信息

### 📚 课程体系 (5张表)
- `courses` - 课程信息
- `course_modules` - 课程模块
- `chapters` - 章节信息
- `lessons` - 课时信息
- `class_schedules` - 班级课程安排

### 📝 作业管理系统 (7张表)
- `homeworks` - 作业模板
- `questions` - 题目信息
- `homework_assignments` - 作业分配
- `homework_submissions` - 作业提交
- `homework_progress` - 作业进度
- `homework_favorites` - 作业收藏
- `homework_reminders` - 作业提醒

### 🎯 学习路径系统 (1张表)
- `learning_paths` - 个性化学习路径

## 🔧 技术栈

### 前端
- **HTML5/CSS3**: 响应式界面设计
- **JavaScript ES6+**: 现代JavaScript特性
- **vis-network**: 网络图可视化库
- **Font Awesome**: 图标库

### 后端API
- **Python 3.7+**: 后端语言
- **Flask**: 轻量级Web框架
- **Flask-CORS**: 跨域支持
- **PyMySQL**: MySQL数据库连接

### 数据库
- **MySQL/OceanBase**: 关系型数据库
- **22张数据表**: 完整的教育系统数据模型

## 🎨 界面特性

### 视觉设计
- **深色主题**: 现代化的深色界面
- **渐变背景**: 美观的视觉效果
- **模块化颜色**: 不同模块使用不同颜色标识
- **动画效果**: 平滑的交互动画

### 交互体验
- **直观操作**: 双击查看详情，点击空白返回
- **实时反馈**: 悬浮提示和加载状态
- **响应式设计**: 适配各种屏幕尺寸
- **键盘快捷键**: 支持常用快捷键操作

## 🔍 故障排除

### 常见问题

1. **API连接失败**
   - 确保API服务器正在运行 (端口5001)
   - 检查数据库连接配置
   - 查看浏览器控制台错误信息

2. **数据加载失败**
   - 检查网络连接
   - 确认数据库表存在
   - 查看API服务器日志

3. **模态框显示异常**
   - 刷新页面重试
   - 检查浏览器兼容性
   - 清除浏览器缓存

### 调试模式
```bash
# 启动调试模式
python api-server.py
# 查看详细日志输出
```

## 📈 性能优化

- **数据缓存**: 30秒缓存机制减少数据库查询
- **分页加载**: 限制单次查询记录数
- **懒加载**: 按需加载表详情数据
- **响应式图片**: 优化不同设备的显示效果

## 🤝 贡献指南

欢迎提交Issue和Pull Request来改进这个项目！

## 📄 许可证

本项目采用MIT许可证。
