{"remainingRequest":"E:\\program development\\The Digital and Intelligent Ecosystem for K-12 Mathematics Education\\homework_system\\node_modules\\babel-loader\\lib\\index.js!E:\\program development\\The Digital and Intelligent Ecosystem for K-12 Mathematics Education\\homework_system\\node_modules\\cache-loader\\dist\\cjs.js??ref--1-0!E:\\program development\\The Digital and Intelligent Ecosystem for K-12 Mathematics Education\\homework_system\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!E:\\program development\\The Digital and Intelligent Ecosystem for K-12 Mathematics Education\\homework_system\\src\\components\\IntegratedHomeworkPage.vue?vue&type=script&lang=js","dependencies":[{"path":"E:\\program development\\The Digital and Intelligent Ecosystem for K-12 Mathematics Education\\homework_system\\src\\components\\IntegratedHomeworkPage.vue","mtime":1749971601387},{"path":"E:\\program development\\The Digital and Intelligent Ecosystem for K-12 Mathematics Education\\homework_system\\babel.config.js","mtime":1749988660293},{"path":"E:\\program development\\The Digital and Intelligent Ecosystem for K-12 Mathematics Education\\homework_system\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1749988910140},{"path":"E:\\program development\\The Digital and Intelligent Ecosystem for K-12 Mathematics Education\\homework_system\\node_modules\\babel-loader\\lib\\index.js","mtime":1749988912220},{"path":"E:\\program development\\The Digital and Intelligent Ecosystem for K-12 Mathematics Education\\homework_system\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1749988910140},{"path":"E:\\program development\\The Digital and Intelligent Ecosystem for K-12 Mathematics Education\\homework_system\\node_modules\\vue-loader\\lib\\index.js","mtime":1749988913356}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuaXRlcmF0b3IuY29uc3RydWN0b3IuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5pdGVyYXRvci5ldmVyeS5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLml0ZXJhdG9yLmZpbmQuanMiOwppbXBvcnQgeyBtYXBHZXR0ZXJzLCBtYXBBY3Rpb25zIH0gZnJvbSAndnVleCc7CmltcG9ydCBIb21ld29ya01hbmFnZW1lbnQgZnJvbSAnLi9Ib21ld29ya01hbmFnZW1lbnQudnVlJzsKaW1wb3J0IEtub3dsZWRnZVJlY29tbWVuZGF0aW9uIGZyb20gJy4vS25vd2xlZGdlUmVjb21tZW5kYXRpb24udnVlJzsKaW1wb3J0IEV4ZXJjaXNlUmVjb21tZW5kYXRpb24gZnJvbSAnLi9FeGVyY2lzZVJlY29tbWVuZGF0aW9uLnZ1ZSc7CmltcG9ydCBGZWVkYmFja01vZHVsZSBmcm9tICcuL0ZlZWRiYWNrTW9kdWxlLnZ1ZSc7CmltcG9ydCB7IGZvcm1hdERhdGUgfSBmcm9tICcuLi91dGlscy9kYXRlRm9ybWF0JzsKZXhwb3J0IGRlZmF1bHQgewogIG5hbWU6ICdJbnRlZ3JhdGVkSG9tZXdvcmtQYWdlJywKICBjb21wb25lbnRzOiB7CiAgICBIb21ld29ya01hbmFnZW1lbnQsCiAgICBLbm93bGVkZ2VSZWNvbW1lbmRhdGlvbiwKICAgIEV4ZXJjaXNlUmVjb21tZW5kYXRpb24sCiAgICBGZWVkYmFja01vZHVsZQogIH0sCiAgZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIGxvYWRpbmc6IGZhbHNlLAogICAgICBzdWJtaXR0aW5nOiBmYWxzZSwKICAgICAgc2F2aW5nOiBmYWxzZSwKICAgICAgYWN0aXZlUHJvYmxlbUlkczogW10sCiAgICAgIGFjdGl2ZVRhYjogJ2tub3dsZWRnZScsCiAgICAgIGFuc3dlcnM6IHt9LAogICAgICBmZWVkYmFjazogbnVsbCwKICAgICAgc2F2ZVRpbWVvdXQ6IG51bGwKICAgIH07CiAgfSwKICBjb21wdXRlZDogewogICAgLi4ubWFwR2V0dGVycyh7CiAgICAgIHVzZXI6ICdnZXRVc2VyJywKICAgICAgaG9tZXdvcmtzOiAnZ2V0SG9tZXdvcmtzJywKICAgICAgY3VycmVudEhvbWV3b3JrOiAnZ2V0Q3VycmVudEhvbWV3b3JrJywKICAgICAgdXNlckNvbnRleHQ6ICdnZXRVc2VyQ29udGV4dCcKICAgIH0pLAogICAgLy8g5b2T5YmN6YCJ5Lit55qE6Zeu6aKYCiAgICBjdXJyZW50UHJvYmxlbSgpIHsKICAgICAgaWYgKCF0aGlzLmN1cnJlbnRIb21ld29yayB8fCAhdGhpcy5hY3RpdmVQcm9ibGVtSWRzLmxlbmd0aCkgcmV0dXJuIG51bGw7CiAgICAgIHJldHVybiB0aGlzLmN1cnJlbnRIb21ld29yay5wcm9ibGVtcy5maW5kKHByb2JsZW0gPT4gcHJvYmxlbS5pZCA9PT0gdGhpcy5hY3RpdmVQcm9ibGVtSWRzWzBdKTsKICAgIH0sCiAgICAvLyDmmK/lkKblj6/ku6Xmj5DkuqQKICAgIGNhblN1Ym1pdCgpIHsKICAgICAgaWYgKCF0aGlzLmN1cnJlbnRIb21ld29yaykgcmV0dXJuIGZhbHNlOwoKICAgICAgLy8g5qOA5p+l5piv5ZCm5omA5pyJ6Zeu6aKY6YO95bey5Zue562UCiAgICAgIHJldHVybiB0aGlzLmN1cnJlbnRIb21ld29yay5wcm9ibGVtcy5ldmVyeShwcm9ibGVtID0+IHRoaXMuYW5zd2Vyc1twcm9ibGVtLmlkXSk7CiAgICB9CiAgfSwKICBjcmVhdGVkKCkgewogICAgLy8g5Yid5aeL5YyW5pWw5o2uCiAgICB0aGlzLmluaXRpYWxpemVEYXRhKCk7CiAgfSwKICBtZXRob2RzOiB7CiAgICAuLi5tYXBBY3Rpb25zKFsnbG9naW4nLCAnZmV0Y2hIb21ld29ya3MnLCAnZmV0Y2hIb21ld29ya0RldGFpbCcsICdmZXRjaFVzZXJDb250ZXh0JywgJ3N1Ym1pdEhvbWV3b3JrJywgJ3NhdmVIb21ld29ya1Byb2dyZXNzJ10pLAogICAgLy8g5Yid5aeL5YyW5pWw5o2uCiAgICBhc3luYyBpbml0aWFsaXplRGF0YSgpIHsKICAgICAgdHJ5IHsKICAgICAgICAvLyDmqKHmi5/nmbvlvZUKICAgICAgICBhd2FpdCB0aGlzLmxvZ2luKHsKICAgICAgICAgIHVzZXJuYW1lOiAnc3R1ZGVudCcsCiAgICAgICAgICBwYXNzd29yZDogJ3Bhc3N3b3JkJwogICAgICAgIH0pOwoKICAgICAgICAvLyDojrflj5bkvZzkuJrliJfooagKICAgICAgICBhd2FpdCB0aGlzLmZldGNoSG9tZXdvcmtzKCk7CgogICAgICAgIC8vIOiOt+WPlueUqOaIt+S4iuS4i+aWhwogICAgICAgIGF3YWl0IHRoaXMuZmV0Y2hVc2VyQ29udGV4dCgpOwogICAgICB9IGNhdGNoIChlcnJvcikgewogICAgICAgIGNvbnNvbGUuZXJyb3IoJ+WIneWni+WMluaVsOaNruWksei0pScsIGVycm9yKTsKICAgICAgICB0aGlzLiRtZXNzYWdlLmVycm9yKCfliqDovb3mlbDmja7lpLHotKXvvIzor7fliLfmlrDpobXpnaLph43or5UnKTsKICAgICAgfQogICAgfSwKICAgIC8vIOmAieaLqeS9nOS4mgogICAgYXN5bmMgc2VsZWN0SG9tZXdvcmsoaG9tZXdvcmtJZCkgewogICAgICB0aGlzLmxvYWRpbmcgPSB0cnVlOwogICAgICB0aGlzLmFuc3dlcnMgPSB7fTsKICAgICAgdGhpcy5mZWVkYmFjayA9IG51bGw7CiAgICAgIHRyeSB7CiAgICAgICAgLy8g6I635Y+W5L2c5Lia6K+m5oOFCiAgICAgICAgY29uc3QgaG9tZXdvcmsgPSBhd2FpdCB0aGlzLmZldGNoSG9tZXdvcmtEZXRhaWwoaG9tZXdvcmtJZCk7CgogICAgICAgIC8vIOWIneWni+WMluetlOahiAogICAgICAgIGlmIChob21ld29yay5zYXZlZEFuc3dlcnMpIHsKICAgICAgICAgIHRoaXMuYW5zd2VycyA9IHsKICAgICAgICAgICAgLi4uaG9tZXdvcmsuc2F2ZWRBbnN3ZXJzCiAgICAgICAgICB9OwogICAgICAgIH0KCiAgICAgICAgLy8g5aaC5p6c5piv5bey5om55pS555qE5L2c5Lia77yM5pi+56S65Y+N6aaICiAgICAgICAgaWYgKGhvbWV3b3JrLnN0YXR1cyA9PT0gJ2dyYWRlZCcgJiYgaG9tZXdvcmsuZmVlZGJhY2spIHsKICAgICAgICAgIHRoaXMuZmVlZGJhY2sgPSBob21ld29yay5mZWVkYmFjazsKICAgICAgICB9CgogICAgICAgIC8vIOm7mOiupOWxleW8gOesrOS4gOS4qumXrumimAogICAgICAgIGlmIChob21ld29yay5wcm9ibGVtcyAmJiBob21ld29yay5wcm9ibGVtcy5sZW5ndGggPiAwKSB7CiAgICAgICAgICB0aGlzLmFjdGl2ZVByb2JsZW1JZHMgPSBbaG9tZXdvcmsucHJvYmxlbXNbMF0uaWRdOwogICAgICAgIH0KICAgICAgfSBjYXRjaCAoZXJyb3IpIHsKICAgICAgICBjb25zb2xlLmVycm9yKCfojrflj5bkvZzkuJror6bmg4XlpLHotKUnLCBlcnJvcik7CiAgICAgICAgdGhpcy4kbWVzc2FnZS5lcnJvcign6I635Y+W5L2c5Lia6K+m5oOF5aSx6LSlJyk7CiAgICAgIH0gZmluYWxseSB7CiAgICAgICAgdGhpcy5sb2FkaW5nID0gZmFsc2U7CiAgICAgIH0KICAgIH0sCiAgICAvLyDkv53lrZjov5vluqYKICAgIHNhdmVQcm9ncmVzcygpIHsKICAgICAgLy8g6Ziy5oqW5aSE55CG77yM6YG/5YWN6aKR57mB5L+d5a2YCiAgICAgIGNsZWFyVGltZW91dCh0aGlzLnNhdmVUaW1lb3V0KTsKICAgICAgdGhpcy5zYXZlVGltZW91dCA9IHNldFRpbWVvdXQoYXN5bmMgKCkgPT4gewogICAgICAgIGlmICghdGhpcy5jdXJyZW50SG9tZXdvcmspIHJldHVybjsKICAgICAgICB0aGlzLnNhdmluZyA9IHRydWU7CiAgICAgICAgdHJ5IHsKICAgICAgICAgIGF3YWl0IHRoaXMuc2F2ZUhvbWV3b3JrUHJvZ3Jlc3MoewogICAgICAgICAgICBob21ld29ya0lkOiB0aGlzLmN1cnJlbnRIb21ld29yay5pZCwKICAgICAgICAgICAgYW5zd2VyczogdGhpcy5hbnN3ZXJzCiAgICAgICAgICB9KTsKICAgICAgICAgIHRoaXMuJG1lc3NhZ2Uuc3VjY2Vzcygn6L+b5bqm5bey5L+d5a2YJyk7CiAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHsKICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ+S/neWtmOi/m+W6puWksei0pScsIGVycm9yKTsKICAgICAgICAgIHRoaXMuJG1lc3NhZ2UuZXJyb3IoJ+S/neWtmOi/m+W6puWksei0pScpOwogICAgICAgIH0gZmluYWxseSB7CiAgICAgICAgICB0aGlzLnNhdmluZyA9IGZhbHNlOwogICAgICAgIH0KICAgICAgfSwgMTAwMCk7CiAgICB9LAogICAgLy8g5o+Q5Lqk5L2c5LiaCiAgICBhc3luYyBzdWJtaXRIb21ld29yaygpIHsKICAgICAgaWYgKCF0aGlzLmN1cnJlbnRIb21ld29yaykgcmV0dXJuOwogICAgICB0aGlzLnN1Ym1pdHRpbmcgPSB0cnVlOwogICAgICB0cnkgewogICAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHRoaXMuc3VibWl0SG9tZXdvcmsoewogICAgICAgICAgaG9tZXdvcmtJZDogdGhpcy5jdXJyZW50SG9tZXdvcmsuaWQsCiAgICAgICAgICBhbnN3ZXJzOiB0aGlzLmFuc3dlcnMKICAgICAgICB9KTsKICAgICAgICB0aGlzLiRtZXNzYWdlLnN1Y2Nlc3MoJ+S9nOS4muaPkOS6pOaIkOWKnycpOwoKICAgICAgICAvLyDmmL7npLrlj43ppogKICAgICAgICBpZiAocmVzdWx0LmZlZWRiYWNrKSB7CiAgICAgICAgICB0aGlzLmZlZWRiYWNrID0gcmVzdWx0LmZlZWRiYWNrOwogICAgICAgIH0KICAgICAgfSBjYXRjaCAoZXJyb3IpIHsKICAgICAgICBjb25zb2xlLmVycm9yKCfmj5DkuqTkvZzkuJrlpLHotKUnLCBlcnJvcik7CiAgICAgICAgdGhpcy4kbWVzc2FnZS5lcnJvcign5o+Q5Lqk5L2c5Lia5aSx6LSlJyk7CiAgICAgIH0gZmluYWxseSB7CiAgICAgICAgdGhpcy5zdWJtaXR0aW5nID0gZmFsc2U7CiAgICAgIH0KICAgIH0sCiAgICAvLyDlupTnlKjnn6Xor4bngrkKICAgIGFwcGx5S25vd2xlZGdlKGtub3dsZWRnZSkgewogICAgICBpZiAoIXRoaXMuY3VycmVudFByb2JsZW0pIHJldHVybjsKCiAgICAgIC8vIOWcqOW9k+WJjeetlOahiOS4reaPkuWFpeefpeivhueCuQogICAgICBjb25zdCBwcm9ibGVtSWQgPSB0aGlzLmN1cnJlbnRQcm9ibGVtLmlkOwogICAgICBjb25zdCBjdXJyZW50QW5zd2VyID0gdGhpcy5hbnN3ZXJzW3Byb2JsZW1JZF0gfHwgJyc7CgogICAgICAvLyDmoLnmja7nn6Xor4bngrnnsbvlnovlupTnlKjkuI3lkIznmoTlhoXlrrkKICAgICAgbGV0IGNvbnRlbnRUb0luc2VydCA9ICcnOwogICAgICBpZiAoa25vd2xlZGdlLmZvcm11bGFzICYmIGtub3dsZWRnZS5mb3JtdWxhcy5sZW5ndGggPiAwKSB7CiAgICAgICAgY29udGVudFRvSW5zZXJ0ID0ga25vd2xlZGdlLmZvcm11bGFzWzBdOwogICAgICB9IGVsc2UgewogICAgICAgIGNvbnRlbnRUb0luc2VydCA9IGtub3dsZWRnZS50aXRsZTsKICAgICAgfQogICAgICB0aGlzLmFuc3dlcnNbcHJvYmxlbUlkXSA9IGN1cnJlbnRBbnN3ZXIgKyAnXG4nICsgY29udGVudFRvSW5zZXJ0OwogICAgICB0aGlzLnNhdmVQcm9ncmVzcygpOwogICAgfSwKICAgIC8vIOmAieaLqee7g+S5oAogICAgc2VsZWN0RXhlcmNpc2UoZXhlcmNpc2UpIHsKICAgICAgLy8g5a6e6ZmF5bqU55So5Lit5bqU6Lez6L2s5Yiw57uD5Lmg6aG16Z2iCiAgICAgIHRoaXMuJG1lc3NhZ2UuaW5mbyhg5Y2z5bCG5byA5aeL57uD5Lmg77yaJHtleGVyY2lzZS50aXRsZX1gKTsKICAgIH0sCiAgICAvLyDojrflj5bpmr7luqbmlofmnKwKICAgIGdldERpZmZpY3VsdHlUZXh0KGRpZmZpY3VsdHkpIHsKICAgICAgY29uc3QgZGlmZmljdWx0eU1hcCA9IHsKICAgICAgICAxOiAn566A5Y2VJywKICAgICAgICAyOiAn5Lit562JJywKICAgICAgICAzOiAn5Zuw6Zq+JywKICAgICAgICA0OiAn5oyR5oiYJywKICAgICAgICA1OiAn5p6B6Zq+JwogICAgICB9OwogICAgICByZXR1cm4gZGlmZmljdWx0eU1hcFtkaWZmaWN1bHR5XSB8fCBkaWZmaWN1bHR5OwogICAgfSwKICAgIC8vIOagvOW8j+WMluaXpeacnwogICAgZm9ybWF0RGF0ZShkYXRlKSB7CiAgICAgIHJldHVybiBmb3JtYXREYXRlKGRhdGUsICdZWVlZLU1NLUREIEhIOm1tJyk7CiAgICB9CiAgfQp9Ow=="},{"version":3,"names":["mapGetters","mapActions","HomeworkManagement","KnowledgeRecommendation","ExerciseRecommendation","FeedbackModule","formatDate","name","components","data","loading","submitting","saving","activeProblemIds","activeTab","answers","feedback","saveTimeout","computed","user","homeworks","currentHomework","userContext","currentProblem","length","problems","find","problem","id","canSubmit","every","created","initializeData","methods","login","username","password","fetchHomeworks","fetchUserContext","error","console","$message","selectHomework","homeworkId","homework","fetchHomeworkDetail","savedAnswers","status","saveProgress","clearTimeout","setTimeout","saveHomeworkProgress","success","submitHomework","result","applyKnowledge","knowledge","problemId","currentAnswer","contentToInsert","formulas","title","selectExercise","exercise","info","getDifficultyText","difficulty","difficultyMap","date"],"sources":["src/components/IntegratedHomeworkPage.vue"],"sourcesContent":["<!--\r\n  文件名: IntegratedHomeworkPage.vue\r\n  描述: 集成四个模块的主页面，包括作业管理、知识推荐、练习推荐和反馈模块\r\n  创建日期: 2023-06-15\r\n-->\r\n\r\n<template>\r\n  <div class=\"integrated-homework-page\">\r\n    <!-- 顶部导航栏 -->\r\n    <header class=\"page-header\">\r\n      <div class=\"header-left\">\r\n        <h2>智能作业系统</h2>\r\n      </div>\r\n      <div class=\"header-right\">\r\n        <el-dropdown v-if=\"user\" trigger=\"click\">\r\n          <span class=\"el-dropdown-link\">\r\n            {{ user.name }} <i class=\"el-icon-arrow-down el-icon--right\"></i>\r\n          </span>\r\n          <el-dropdown-menu slot=\"dropdown\">\r\n            <el-dropdown-item>个人中心</el-dropdown-item>\r\n            <el-dropdown-item>设置</el-dropdown-item>\r\n            <el-dropdown-item divided>退出登录</el-dropdown-item>\r\n          </el-dropdown-menu>\r\n        </el-dropdown>\r\n      </div>\r\n    </header>\r\n    \r\n    <!-- 主要内容区域 -->\r\n    <main class=\"page-content\">\r\n      <!-- 左侧作业管理 -->\r\n      <div class=\"left-panel\">\r\n        <HomeworkManagement \r\n          :homeworks=\"homeworks\"\r\n          :activeHomeworkId=\"currentHomework ? currentHomework.id : ''\"\r\n          @select-homework=\"selectHomework\"\r\n          @refresh-homeworks=\"fetchHomeworks\"\r\n        />\r\n      </div>\r\n      \r\n      <!-- 中间作业内容 -->\r\n      <div class=\"center-panel\">\r\n        <div v-if=\"loading\" class=\"loading-container\">\r\n          <el-skeleton :rows=\"10\" animated />\r\n        </div>\r\n        \r\n        <div v-else-if=\"!currentHomework\" class=\"empty-state\">\r\n          <i class=\"el-icon-document\"></i>\r\n          <p>请从左侧选择一个作业</p>\r\n        </div>\r\n        \r\n        <div v-else class=\"homework-content\">\r\n          <div class=\"homework-header\">\r\n            <h3>{{ currentHomework.title }}</h3>\r\n            <div class=\"homework-meta\">\r\n              <span><i class=\"el-icon-date\"></i> 截止日期: {{ formatDate(currentHomework.deadline) }}</span>\r\n              <span><i class=\"el-icon-medal\"></i> 难度: {{ getDifficultyText(currentHomework.difficulty) }}</span>\r\n            </div>\r\n            <p class=\"homework-description\">{{ currentHomework.description }}</p>\r\n          </div>\r\n          \r\n          <div class=\"problem-list\">\r\n            <el-collapse v-model=\"activeProblemIds\">\r\n              <el-collapse-item \r\n                v-for=\"problem in currentHomework.problems\" \r\n                :key=\"problem.id\"\r\n                :title=\"`${problem.title} (${problem.points}分)`\"\r\n                :name=\"problem.id\"\r\n              >\r\n                <div class=\"problem-content\">\r\n                  <div class=\"problem-statement\" v-html=\"problem.content\"></div>\r\n                  \r\n                  <div class=\"answer-area\">\r\n                    <el-input\r\n                      type=\"textarea\"\r\n                      :rows=\"4\"\r\n                      placeholder=\"在此输入答案...\"\r\n                      v-model=\"answers[problem.id]\"\r\n                      @input=\"saveProgress\"\r\n                    ></el-input>\r\n                  </div>\r\n                </div>\r\n              </el-collapse-item>\r\n            </el-collapse>\r\n          </div>\r\n          \r\n          <div class=\"homework-actions\">\r\n            <el-button \r\n              type=\"primary\" \r\n              :disabled=\"!canSubmit\"\r\n              @click=\"submitHomework\"\r\n              :loading=\"submitting\"\r\n            >提交作业</el-button>\r\n            <el-button \r\n              type=\"info\" \r\n              @click=\"saveProgress\"\r\n              :loading=\"saving\"\r\n            >保存进度</el-button>\r\n          </div>\r\n          \r\n          <!-- 反馈区域 -->\r\n          <div v-if=\"feedback\" class=\"feedback-container\">\r\n            <FeedbackModule :feedback=\"feedback\" />\r\n          </div>\r\n        </div>\r\n      </div>\r\n      \r\n      <!-- 右侧推荐面板 -->\r\n      <div class=\"right-panel\">\r\n        <el-tabs v-model=\"activeTab\" type=\"card\">\r\n          <el-tab-pane label=\"知识推荐\" name=\"knowledge\">\r\n            <KnowledgeRecommendation \r\n              :currentProblem=\"currentProblem\"\r\n              :userContext=\"userContext\"\r\n              @knowledge-selected=\"applyKnowledge\"\r\n            />\r\n          </el-tab-pane>\r\n          <el-tab-pane label=\"练习推荐\" name=\"exercise\">\r\n            <ExerciseRecommendation \r\n              :currentProblem=\"currentProblem\"\r\n              :userContext=\"userContext\"\r\n              @exercise-selected=\"selectExercise\"\r\n            />\r\n          </el-tab-pane>\r\n        </el-tabs>\r\n      </div>\r\n    </main>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { mapGetters, mapActions } from 'vuex';\r\nimport HomeworkManagement from './HomeworkManagement.vue';\r\nimport KnowledgeRecommendation from './KnowledgeRecommendation.vue';\r\nimport ExerciseRecommendation from './ExerciseRecommendation.vue';\r\nimport FeedbackModule from './FeedbackModule.vue';\r\nimport { formatDate } from '../utils/dateFormat';\r\n\r\nexport default {\r\n  name: 'IntegratedHomeworkPage',\r\n  \r\n  components: {\r\n    HomeworkManagement,\r\n    KnowledgeRecommendation,\r\n    ExerciseRecommendation,\r\n    FeedbackModule\r\n  },\r\n  \r\n  data() {\r\n    return {\r\n      loading: false,\r\n      submitting: false,\r\n      saving: false,\r\n      activeProblemIds: [],\r\n      activeTab: 'knowledge',\r\n      answers: {},\r\n      feedback: null,\r\n      saveTimeout: null\r\n    };\r\n  },\r\n  \r\n  computed: {\r\n    ...mapGetters({\r\n      user: 'getUser',\r\n      homeworks: 'getHomeworks',\r\n      currentHomework: 'getCurrentHomework',\r\n      userContext: 'getUserContext'\r\n    }),\r\n    \r\n    // 当前选中的问题\r\n    currentProblem() {\r\n      if (!this.currentHomework || !this.activeProblemIds.length) return null;\r\n      \r\n      return this.currentHomework.problems.find(\r\n        problem => problem.id === this.activeProblemIds[0]\r\n      );\r\n    },\r\n    \r\n    // 是否可以提交\r\n    canSubmit() {\r\n      if (!this.currentHomework) return false;\r\n      \r\n      // 检查是否所有问题都已回答\r\n      return this.currentHomework.problems.every(\r\n        problem => this.answers[problem.id]\r\n      );\r\n    }\r\n  },\r\n  \r\n  created() {\r\n    // 初始化数据\r\n    this.initializeData();\r\n  },\r\n  \r\n  methods: {\r\n    ...mapActions([\r\n      'login',\r\n      'fetchHomeworks',\r\n      'fetchHomeworkDetail',\r\n      'fetchUserContext',\r\n      'submitHomework',\r\n      'saveHomeworkProgress'\r\n    ]),\r\n    \r\n    // 初始化数据\r\n    async initializeData() {\r\n      try {\r\n        // 模拟登录\r\n        await this.login({ username: 'student', password: 'password' });\r\n        \r\n        // 获取作业列表\r\n        await this.fetchHomeworks();\r\n        \r\n        // 获取用户上下文\r\n        await this.fetchUserContext();\r\n      } catch (error) {\r\n        console.error('初始化数据失败', error);\r\n        this.$message.error('加载数据失败，请刷新页面重试');\r\n      }\r\n    },\r\n    \r\n    // 选择作业\r\n    async selectHomework(homeworkId) {\r\n      this.loading = true;\r\n      this.answers = {};\r\n      this.feedback = null;\r\n      \r\n      try {\r\n        // 获取作业详情\r\n        const homework = await this.fetchHomeworkDetail(homeworkId);\r\n        \r\n        // 初始化答案\r\n        if (homework.savedAnswers) {\r\n          this.answers = { ...homework.savedAnswers };\r\n        }\r\n        \r\n        // 如果是已批改的作业，显示反馈\r\n        if (homework.status === 'graded' && homework.feedback) {\r\n          this.feedback = homework.feedback;\r\n        }\r\n        \r\n        // 默认展开第一个问题\r\n        if (homework.problems && homework.problems.length > 0) {\r\n          this.activeProblemIds = [homework.problems[0].id];\r\n        }\r\n      } catch (error) {\r\n        console.error('获取作业详情失败', error);\r\n        this.$message.error('获取作业详情失败');\r\n      } finally {\r\n        this.loading = false;\r\n      }\r\n    },\r\n    \r\n    // 保存进度\r\n    saveProgress() {\r\n      // 防抖处理，避免频繁保存\r\n      clearTimeout(this.saveTimeout);\r\n      this.saveTimeout = setTimeout(async () => {\r\n        if (!this.currentHomework) return;\r\n        \r\n        this.saving = true;\r\n        \r\n        try {\r\n          await this.saveHomeworkProgress({\r\n            homeworkId: this.currentHomework.id,\r\n            answers: this.answers\r\n          });\r\n          \r\n          this.$message.success('进度已保存');\r\n        } catch (error) {\r\n          console.error('保存进度失败', error);\r\n          this.$message.error('保存进度失败');\r\n        } finally {\r\n          this.saving = false;\r\n        }\r\n      }, 1000);\r\n    },\r\n    \r\n    // 提交作业\r\n    async submitHomework() {\r\n      if (!this.currentHomework) return;\r\n      \r\n      this.submitting = true;\r\n      \r\n      try {\r\n        const result = await this.submitHomework({\r\n          homeworkId: this.currentHomework.id,\r\n          answers: this.answers\r\n        });\r\n        \r\n        this.$message.success('作业提交成功');\r\n        \r\n        // 显示反馈\r\n        if (result.feedback) {\r\n          this.feedback = result.feedback;\r\n        }\r\n      } catch (error) {\r\n        console.error('提交作业失败', error);\r\n        this.$message.error('提交作业失败');\r\n      } finally {\r\n        this.submitting = false;\r\n      }\r\n    },\r\n    \r\n    // 应用知识点\r\n    applyKnowledge(knowledge) {\r\n      if (!this.currentProblem) return;\r\n      \r\n      // 在当前答案中插入知识点\r\n      const problemId = this.currentProblem.id;\r\n      const currentAnswer = this.answers[problemId] || '';\r\n      \r\n      // 根据知识点类型应用不同的内容\r\n      let contentToInsert = '';\r\n      \r\n      if (knowledge.formulas && knowledge.formulas.length > 0) {\r\n        contentToInsert = knowledge.formulas[0];\r\n      } else {\r\n        contentToInsert = knowledge.title;\r\n      }\r\n      \r\n      this.answers[problemId] = currentAnswer + '\\n' + contentToInsert;\r\n      this.saveProgress();\r\n    },\r\n    \r\n    // 选择练习\r\n    selectExercise(exercise) {\r\n      // 实际应用中应跳转到练习页面\r\n      this.$message.info(`即将开始练习：${exercise.title}`);\r\n    },\r\n    \r\n    // 获取难度文本\r\n    getDifficultyText(difficulty) {\r\n      const difficultyMap = {\r\n        1: '简单',\r\n        2: '中等',\r\n        3: '困难',\r\n        4: '挑战',\r\n        5: '极难'\r\n      };\r\n      return difficultyMap[difficulty] || difficulty;\r\n    },\r\n    \r\n    // 格式化日期\r\n    formatDate(date) {\r\n      return formatDate(date, 'YYYY-MM-DD HH:mm');\r\n    }\r\n  }\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n.integrated-homework-page {\r\n  display: flex;\r\n  flex-direction: column;\r\n  height: 100vh;\r\n  overflow: hidden;\r\n}\r\n\r\n.page-header {\r\n  display: flex;\r\n  justify-content: space-between;\r\n  align-items: center;\r\n  padding: 0 20px;\r\n  height: 60px;\r\n  background-color: #409EFF;\r\n  color: white;\r\n}\r\n\r\n.header-left h2 {\r\n  margin: 0;\r\n  font-size: 20px;\r\n}\r\n\r\n.el-dropdown-link {\r\n  color: white;\r\n  cursor: pointer;\r\n}\r\n\r\n.page-content {\r\n  display: flex;\r\n  flex: 1;\r\n  overflow: hidden;\r\n}\r\n\r\n.left-panel {\r\n  width: 280px;\r\n  border-right: 1px solid #e6e6e6;\r\n  overflow: hidden;\r\n  display: flex;\r\n  flex-direction: column;\r\n}\r\n\r\n.center-panel {\r\n  flex: 1;\r\n  padding: 20px;\r\n  overflow-y: auto;\r\n}\r\n\r\n.right-panel {\r\n  width: 320px;\r\n  border-left: 1px solid #e6e6e6;\r\n  overflow: hidden;\r\n  display: flex;\r\n  flex-direction: column;\r\n}\r\n\r\n.loading-container {\r\n  padding: 20px;\r\n}\r\n\r\n.empty-state {\r\n  display: flex;\r\n  flex-direction: column;\r\n  align-items: center;\r\n  justify-content: center;\r\n  height: 300px;\r\n  color: #909399;\r\n}\r\n\r\n.empty-state i {\r\n  font-size: 48px;\r\n  margin-bottom: 20px;\r\n}\r\n\r\n.homework-header {\r\n  margin-bottom: 20px;\r\n}\r\n\r\n.homework-header h3 {\r\n  margin: 0 0 10px 0;\r\n  font-size: 22px;\r\n  color: #303133;\r\n}\r\n\r\n.homework-meta {\r\n  display: flex;\r\n  gap: 20px;\r\n  font-size: 14px;\r\n  color: #606266;\r\n  margin-bottom: 10px;\r\n}\r\n\r\n.homework-description {\r\n  color: #606266;\r\n  line-height: 1.6;\r\n}\r\n\r\n.problem-list {\r\n  margin-bottom: 20px;\r\n}\r\n\r\n.problem-content {\r\n  padding: 10px 0;\r\n}\r\n\r\n.problem-statement {\r\n  margin-bottom: 15px;\r\n  line-height: 1.6;\r\n}\r\n\r\n.answer-area {\r\n  margin-top: 10px;\r\n}\r\n\r\n.homework-actions {\r\n  display: flex;\r\n  gap: 10px;\r\n  margin-bottom: 20px;\r\n}\r\n\r\n.feedback-container {\r\n  margin-top: 30px;\r\n  padding-top: 20px;\r\n  border-top: 1px solid #e6e6e6;\r\n}\r\n</style>\r\n"],"mappings":"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","ignoreList":[]}]}